<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.18/index.global.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="login.css" />

    <script>
      function verificarLogin(event) {
        event.preventDefault();

        var usuario = document.getElementById("nome").value;
        var senha = document.getElementById("senha").value;
        var mensagem = document.getElementById("mensagem");
        var formulario = event.target; // o próprio formulário

        mensagem.textContent = "";

        if (usuario === "admin" && senha === "123admin") {
          mensagem.style.color = "green";
          mensagem.textContent = "Login feito com sucesso...";

          // Define a flag de login na sessionStorage
          sessionStorage.setItem("logado", "true");

          setTimeout(() => {
            mensagem.textContent = "";
          }, 2000);

          setTimeout(() => {
            formulario.reset(); // reseta o formulário ANTES de redirecionar
            window.location.href =
              "http://localhost/Estagio-Ferias---Calendario-Eniac/FRONT-END/NovoEvento.html";
          }, 2500); // tempo ajustado para 2,5 segundos, como você mencionou
        } else {
          mensagem.style.color = "red";
          mensagem.textContent = "Login não confirmado";
          // Remove a flag de login se as credenciais estiverem erradas
          sessionStorage.removeItem("logado");
        }
      }
    </script>
  </head>

  <body>
    <div class="divCabecalho">
      <a href="https://www.eniac.edu.br/">
        <img
          src="http://localhost/Estagio-Ferias---Calendario-Eniac/imagens/path32.png"
          alt="Logo Eniac"
          id="eniac"
        />
      </a>
    </div>

    <div class="box">
      <form onsubmit="verificarLogin(event)">
        <fieldset>
          <br />
          <legend><b>Login Administrador</b></legend>
          <br /><br />

          <div class="inputBox">
            <input
              type="text"
              name="nome"
              id="nome"
              class="inputUser"
              required
            />
            <label for="nome" class="labelInput">Nome de usuário</label>
          </div>

          <br /><br />

          <div class="inputBox">
            <input
              type="password"
              name="senha"
              id="senha"
              class="inputUser"
              required
            />
            <label for="senha" class="labelInput">Senha</label>
          </div>

          <br /><br /><br />

          <button type="submit" id="submit">Login</button>
          <br /><br />

          <div id="mensagem"></div>
        </fieldset>
      </form>
    </div>
  </body>
</html>